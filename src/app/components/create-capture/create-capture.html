<p-toast></p-toast>

<!-- Bot칩n flotante para crear captura -->
<button class="floating-button" (click)="openDialog()">
  游꿖 Nueva Captura
</button>

<!-- Dialog para crear captura -->
<p-dialog
  [(visible)]="displayDialog"
  header="游꿖 Registrar Nueva Captura"
  [modal]="true"
  [style]="{width: '600px', maxHeight: '90vh'}"
  [draggable]="false"
  [resizable]="false">

  <div class="dialog-content">
    <!-- Datos de la captura -->
    <div class="field">
      <label for="fishType">Tipo de Pez *</label>
      <input
        pInputText
        id="fishType"
        [(ngModel)]="newCapture.fishType"
        placeholder="Ej: Trucha, Carpa, Lucio..."
        class="w-full" />
    </div>

    <div class="field">
      <label for="location">Ubicaci칩n</label>
      <input
        pInputText
        id="location"
        [(ngModel)]="newCapture.location"
        placeholder="Ej: R칤o Ebro, Embalse de..."
        class="w-full" />
    </div>

    <div class="field">
      <label for="weight">Peso (kg) *</label>
      <p-inputNumber
        id="weight"
        [(ngModel)]="newCapture.weight"
        [minFractionDigits]="1"
        [maxFractionDigits]="2"
        [min]="0.1"
        suffix=" kg"
        placeholder="0.0"
        class="w-full">
      </p-inputNumber>
    </div>

    <div class="field">
      <label for="captureDate">Fecha de Captura *</label>
      <p-datePicker
        id="captureDate"
        [(ngModel)]="newCapture.captureData"
        dateFormat="dd/mm/yy"
        [showIcon]="true"
        [maxDate]="maxDate"
        [iconDisplay]="'input'"
        class="w-full">
      </p-datePicker>
    </div>

    <!-- Secci칩n de im치genes -->
    <div class="field images-section">
      <label>游닞 Im치genes (opcional)</label>
      <app-image-upload
        [maxImages]="10"
        (imagesSelected)="onImagesSelected($event)">
      </app-image-upload>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <p-button
      label="Cancelar"
      icon="pi pi-times"
      (onClick)="displayDialog = false"
      [text]="true"
      [disabled]="loading">
    </p-button>
    <p-button
      label="Registrar Captura"
      icon="pi pi-check"
      severity="success"
      (onClick)="createCapture()"
      [loading]="loading">
    </p-button>
  </ng-template>
</p-dialog>